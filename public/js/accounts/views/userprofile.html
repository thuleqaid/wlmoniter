<ion-view view-title="User Profile">
  <ion-content>
    <form ng-submit="doUpdate()" name="profileForm">
      <div class="list">
        <label class="item item-input">
          <span class="input-label">Username</span>
          <input type="text" ng-model="username" readonly="true">
          <span class="input-label">{{mailsuffix}}</span>
        </label>
        <label class="item item-toggle" ng-if="permission.admin">
          Valid
          <label class="toggle toggle-positive">
            <input type="checkbox" ng-model="puser.valid">
            <div class="track">
              <div class="handle"></div>
            </div>
          </label>
        </label>
        <label class="item item-input">
          <span class="input-label">LastName</span>
          <input type="text" ng-model="puser.last_name">
        </label>
        <label class="item item-input">
          <span class="input-label">FirstName</span>
          <input type="text" ng-model="puser.first_name">
        </label>
        <permission-edit permission="{{puser.permission}}" editable="{{permission.admin}}" updater="updatePermission(args)"></permission-edit>
        <label class="item">
          <button ng-disabled="!profileForm.$dirty" class="button button-block button-positive" type="submit">Update</button>
        </label>
    </form>
  </ion-content>
</ion-view>

